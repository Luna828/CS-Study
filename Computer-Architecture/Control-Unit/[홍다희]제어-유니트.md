# 제어 유니트 (Control Unit)

컴퓨터에는 명령어를 인출하여 해독하고 실행하는 과정이 순차적으로 발생되도록 하기 위한 제어 신호를 보내주는 '제어 유니트'가 있다. 이 제어 유니트에 대해 알아보려고 한다. 

# 제어 유니트의 기능

제어 유니트의 주요 기능은 두 가지가 있습니다. 

1. 명령어 코드의 해독 (decode) <br>
2. 명령어 실행에 필요한 제어 신호들의 발생 

제어 유니트는 컴퓨터 프로그램을 구성하고 있는 명령어들을 해독하고 그 결과에 따라 명령어 실행에 필요한 동작들을 수행시키기 위한 제어 신호들을 발생하는 장치이다. 즉 명령어 사이클이 적절히 수행되도록 하는 장치이다. 

명령어 사이클은 인출 사이클, 간접 사이클, 실행 사이클 및 인터럽트 사이클로 이루어져 있으며 각 사이클은 마이크로-연산드링 수행된다. 

마이크로 명령어들은 명령어 인출과 같은 CPU의 특정 기능을 위하여 그룹 단위로 작성되는데, 이러한 각 그룹을 루틴이라고 한다. **인출 사이클 루틴, 간접 사이클 루틴, 실행 사이클 루틴**이 있다. 

# 제어 유니트의 구조 

1. 명령어 해독기 (instruction decoder) - 명령어 레지스터(IR)로부터 들어오는 명령어의 연산 코드를 해독하여 해당 연산을 수행하기 위한 루틴의 시작 주소를 결정한다
2. 제어 주소 레지스터 (control address register) - 다음에 실행할 마이크로명령어의 주소를 저장하는 레지스터다
3. 제어 기억장치 (control memory) - 마이크로명령어들로 이루어진 마이크로프로그램을 저장하는 내부 기억장치이다 
4. 제어 버퍼 레지스터 (control buffer register) - 제어 기억장치로부터 읽혀진 마이크로명령어를 일시적으로 저장하는 레지스터이다 
5. 서브루틴 레지스터 (subroutine register) - 마이크로프로그램에서 서브루틴이 호출되는 경우에, 현재의 제어 주소 레지스터 내용을 일시적으로 저장하는 레지스터
6. 순서제어 모듈 (sequencing module) - 마이크로명령어의 실행 순서를 결정하는 회로들의 집합이다 

![image](https://github.com/hdaisywd/hdaisywd/assets/102342953/79378fcf-4255-4bce-b464-4f7e9a7ce926)

# 마이크로 명령어의 형식 

제어 기억장치에 저장되는 마이크로 명령어 형식의 예는 아래의 그림과 같다. 아래의 마이크로 명령어 길이는 17비트고 상단에 표시된 수만큼의 비트들로 이루어지는 다섯개의 필드로 구성된다. 

![image](https://github.com/hdaisywd/hdaisywd/assets/102342953/e3204afb-e4e0-4481-bd34-b7690a0beb71)

연산 필드가 두개이므로 두 개의 마이크로 연산이 동시에 수행될 수 있다. 조건 필드는 분기에 사용될 조건 플래그를 지정한다. 주소 필드는 분기가 발생하는 경우를 위하여 목적지 마이크로명령어의 주소를 가지고 있다. 

# 마이크로 프로그래밍 

[마이크로 프로그래밍](https://cs-ssupport.tistory.com/343)