# 들어가기 전에

네트워크의 기본적인 구성은 레이어2 스위치로 하나의 네트워크를 구성하고, 라우터 또는 레이어3 스위치로 각 네트워크를 서로 연결하는 형태이다. 다른 네트워크에 있는 서버까지의 데이터 전송은 같은 네트워크 내의 전송 방식을 반복하는 것이다. PC에서 서버로 가는 데이터는 우선 PC와 같은 네트워크 상에 있는 라우터로 전송하고, 이 라우터는 다시 같은 네트워크 상의 다음 라우터로 전송한다. 이런식으로 목적지 네트워크 상의 라우터까지 도달하면 해당 라우터가 서버로 데이터를 전송한다.

이처럼 같은 네트워크 내에서 데이터를 전송하는 프로토콜로 사용되는 것이 이더넷과 무선 LAN(Wi-Fi)이다.

### LAN 환경

<img width="377" alt="image" src="https://github.com/hdaisywd/hdaisywd/assets/102342953/b1e46e40-dc8a-42b0-aa68-95d43ecca1df">

중앙의 호스트에 Layer2 Switch가 존재하고 주변에 여러 호스트가 1대 1로 연결되어 있는 방식이다. 이러한 원리로 호스트에서 데이터를 주고받을 때 사용하는 것을 이더넷 프로토콜이라고 부른다. 

<img width="246" alt="image" src="https://github.com/hdaisywd/hdaisywd/assets/102342953/26059d60-4f57-4af3-9782-53112a8af5d9">

# 그래서 이더넷이란?

<img width="374" alt="image" src="https://github.com/hdaisywd/hdaisywd/assets/102342953/cffd2e74-2aaf-4a9c-98d3-0df1da460daf">

간단히 말하자면 이더넷이란 TCP/IP 모델에서 네트워크 인터페이스 층의 프로토콜이다. 좀 더 복잡하게 말하자면 LAN, WAN 등의 네트워크 환경에서 각 기기들이 케이블선(전송매체)을 통해 데이터를 주고받을 수 있도록 만들어진 기술이다. 이 때, MAC(Media Access Control Address)주소를 통해서 이더넷 인터페이스를 특정한다 (각각의 기기를 구별)

이더넷 헤더는 출발지/목적지 MAC 주소와 타입코드를 포함한다

### MAC 주소

이더넷은 이더넷 인터페이스 간에 데이터를 전송하므로, 이더넷 인터페이스를 특정해야 전송이 가능하다. 이더넷 인터페이스를 특정하기 위해서는 MAC 주소가 필요하다.
MAC 주소는 이더넷 인터페이스를 특정하기 위한 48비트 주소로, 이더넷 인터페이스에 미리 할당 되어 있어, 기본적으로 변경할 수 없는 고유 주소이다.

### 토폴로지 (이더넷 연결 형태)

> 1) 버스형 (Bus(=Line) topology) <br>
> 하나의 전송매체를 여러 기기가 공유하는 형식으로 예전에 주로 사용하던 연결 방식이다. 공유된 전송매체로 동시에 여러대에서 데이터를 전송하면 충돌이 발생하기 때문애 CSMA/CD(Carrier Collision Detector)라는 데이터 전송한다. 타이밍 제어방식을 사용한다 (== 먼저 가는 쪽이 승리하는 방식)

> 2) 스타형 (Star topology) <br>
> 레이어2 스위치 중심으로 기기가 연결된 방식이다.많은 케이블이 사용되기 때문에, 비용적으로는 비싸지만 하나의 장치에 문제가 있을 때 다른 네트워크에 영향을 주지 않는 장점이 있어 현재는 대부분이 버스형 토폴로지에서 스타형 토폴로지로 옮겨가고 있다.

초기 이더넷은 버스형 토폴로지를 채용했는데, 이는 하나의 전송 매체를 여러 기기가 공유하는 형태인데, 어떻게 공유할 것인지는 CSMA/CD 방식을 사용한다. 현재는 버스형에서 레이어2 스위치를 중심으로 하는 스타형 토폴로지로 옮겨가고 있다.
CSMA/CD

CSMA/CD(Carrier Sense Multiple Access with Collision Detector)는 버스형 토폴로지에서 사용하는 전송 매체 공유 메커니즘이다. 하나의 전송 매체를 다수의 호스트가 공유하기 때문에 동시에 전송시 충돌이 발생하므로 이를 제어할 필요가 있다.
데이터를 전송하기 전에 전송 매체를 사용 중인지 확인하고 전송하고, 만약 충돌이 발생하면 랜덤한 시간 동안 대기했다가 다시 전송하는 방식이다.

### 통신과정

이더넷 네트워크에서 레이어2 스위치의 역할은 네트워크 하나를 구성하는 네트워크 기기이다. 레이어2 스위치에서의 데이터는 이더넷 프레임으로, 단지 이더넷 헤더의 MAC 주소를 확인만 하는 역할이다. 레이어2 스위치의 데이터 전송 동작의 흐름은 다음과 같다.

1. 출발지 호스트에서 레이어2 스위치로 이더넷 프레임을 전송. <br>
2. 수신한 이더넷 프레임의 출발지 MAC 주소를 MAC 주소 테이블에 저장. <br>
3. 목적지 MAC 주소와 MAC 주소 테이블을 확인하여 어느 포트에 전송할지 결정한다. <br>
4. 만약 테이블에 존재하지 않는 MAC 주소라면 수신 포트를 제외한 모든 포트로 이더넷 프레임을 전송한다.(플러딩) <br>
5. 전송한 이더넷 프레임은 레이어2 스위치에 연결된 내부 네트워크 안에 있는 호스트로 전달되지만, 다른 네트워크의 레이어2 스위치로도 전달된다. <br>
6. 다른 네트워크의 레이어2 스위치에서도 마찬가지로 MAC 주소 테이블을 확인하여 없다면 플러딩한다. <br>
7. 목적지 MAC 주소를 가진 호스트에게 이더넷 프레임이 전송될 때까지 위와 같은 과정을 반복한다.

# 무선 LAN

이더넷은 유선 네트워크인데, 케이블 없이 간편하게 네트워크를 만들기 위해 무선 LAN이 개발되었다. 무선 LAN을 구성하기 위해서는 무선 LAN 액세스 포인트와 무선 LAN 인터페이스가 필요하다. 무선 LAN 인터페이스는 노트북이나 스마트폰 등에 미리 내장되어 있는 경우가 대부분이다. 무선 LAN의 데이터 통신은 무선 LAN 액세스 포인트를 경유한다.

- 인프라스트럭처 모드 : 무선 LAN 액세스 포인트를 경유해 데이터를 주고 받는 것.
- 애드혹 모드 : 무선 LAN 인터페이스끼리 직접 데이터를 주고받는 것.

보통 통신하고자 하는 서버는 유선 이더넷으로 접속되기 때문에, 무선 LAN 액세스 포인트도 결국 레이어2 스위치와 접속해 유선 이더넷 네트워크와도 연결된다.

> 무선 LAN의 규격은 IEEE802.11로, 전파의 주파수 대역으로 나뉜다. 제조사가 다른 무선 LAN 기기끼리도 원할하게 통신하기 위해 Wi-Fi Alliance라는 업계 단체가 상호 접속성을 인증한 브랜드를 Wi-Fi라고 부르는데, 현재는 무선 LAN 자체를 가리켜 Wi-Fi라고 표현하게 되었다.

### 통신과정 

무선 LAN으로 통신하려면 무선 LAN 액세스 포인트에 연결해서 무선 LAN 링크를 확립해야 하는데, 무선 LAN에 연결하는 것을 어소시에이션이라고 한다.
어소시에이션에는 SSID(Service Set Identifier)가 필요하다. SSID는 무선 LAN의 논리적인 그룹을 식별하는 식별정보인데, 미리 무선 LAN 액세스 포인트에는 최대 32문자의 문자열로 SSID를 지정해 둔다.
무선 LAN 클라이언트는 액세스 포인트가 내보내는 제어신호(비콘)에서 이용할 수 있는 전파의 주파수(채널)을 찾은 후, 가용 채널을 발견하면 SSID를 지정해서 무선 LAN 액세스 포인트에 어소시에이션 요청을 보낸다. 무선 LAN 액세스 포인트는 이에 대한 응답으로 접속할 수 있는지 알려준다.

